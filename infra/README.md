# infra

## 用途/职责
基础设施与部署配置，负责平台与环境层面的交付。Infra 与业务解耦，不承载业务规则与流程。

## 包含内容
- cloudflare/：Cloudflare Pages/Workers 相关配置与示例
- aliyun/：阿里云基础设施占位（docker/ecs/rds）

## 与其它目录的依赖关系
- 允许依赖：无运行时代码依赖，仅参考 `apps` 的构建产物与环境变量需求。
- 禁止依赖：`/packages/*` 或 `apps` 的源码实现。

## 禁止事项
- 在 infra 中加入业务逻辑、Prompt、Domain 规则或数据库迁移。
- 将运行时配置混入应用代码仓库之外的不可追溯位置。

## 常见变更场景
- 新增部署平台：在 `infra/` 下新增目录并补充 README。
- 增加环境变量：在对应平台的 `env.example` 中新增键名并说明用途。
- 更新平台配置：记录变更原因与影响范围。

## 命名规范/约定
- 平台目录使用小写英文（如 `cloudflare`、`aliyun`）。
- 环境变量使用全大写下划线命名，保持语义清晰。

## 测试/验证原则
- 变更需可审计、可回滚，先验证部署环境，再扩展到生产。
- 配置与应用契约保持一致，不引入隐式依赖。