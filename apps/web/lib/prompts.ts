// This file is auto-generated by scripts/sync-prompts.mjs.
// Source: packages/prompts/**/*.md

const PROMPTS: Record<string, string> = {
  "check/consistency.v1.md": "﻿# 一致性检查 v1\n\n你会收到 JSON 输入（包含 truthSnapshot/roles）。只输出 JSON，不要 Markdown，不要解释。\n\n输出格式：\n{\n  \"issues\": [\n    {\n      \"type\": \"consistency\",\n      \"severity\": \"P0|P1|P2\",\n      \"title\": \"问题标题\",\n      \"description\": \"问题说明\",\n      \"refs\": []\n    }\n  ]\n}\n\n规则：\n- 仅输出真正冲突或高风险问题。\n- 若无问题，issues 为空数组。\n",
  "check/logic.v1.md": "﻿# 逻辑审查 v1\n\n你会收到 JSON 输入（包含 truthSnapshot/context）。只输出 JSON，不要 Markdown，不要解释。\n\n输出格式：\n{\n  \"issues\": [\n    {\n      \"type\": \"logic_check\",\n      \"severity\": \"P0|P1|P2\",\n      \"title\": \"问题标题\",\n      \"description\": \"问题说明\",\n      \"refs\": []\n    }\n  ]\n}\n\n规则：\n- P0：硬逻辑冲突（时间线冲突/Truth 冲突/视角污染）。\n- P1：重要缺失或可导致跑偏的问题。\n- P2：改进建议类。\n- 若无问题，issues 为空数组。\n",
  "derive/clue.v1.md": "﻿## 【板块：线索 Clues（线索库）】\n线索是推理路径的“路标”，不是信息堆砌。\n你不得新增事实；每条线索必须可回溯到 Truth 的某个时间节点/事实节点。\n\n### 硬性要求（商业可跑）\n- 必需线索 ≥12 条（形成证据闭环）\n- 干扰线索 ≥6 条（红鲱鱼）\n- 强证据 ≥3 条，但不得投放在早期（投放阶段写“中后期/触发后”）\n- 每条线索必须指向：\n  - 证明什么（事实）\n  - 排除谁（至少一个）\n  - 容易误读点（如有）\n\n### 输出要求\n- 只输出 JSON，不要解释\n- items 为多条\n- content 字段为纯文本（非 Markdown），使用【】标题与分行结构\n\n### 强制输出结构\n\n【Clues（线索库）】\n\n【必需线索（证据闭环必须）】\n【线索：名称】\n- 类型（物证/文书/口供/数字记录/场景）：\n- 属性（真线索/误导线索/氛围线索）：\n- 指向对象（角色/事件/地点）：\n- 证据力（弱/中/强）：\n- 关联 Truth（对应时间节点/事实编号）：\n- 投放阶段（触发条件/节点）：\n- 玩家可见内容（可直接给玩家）：\n- DM 解读（真实含义 + 使用提醒 + 常见误解纠偏）：\n\n（重复输出）\n\n【干扰线索（红鲱鱼）】\n（同上结构重复输出）\n\n【禁止事项】\n- 禁止一锤定音\n- 禁止“凭空出现的证据”\n- 禁止与 Truth 不可回溯的线索\n\n### Output JSON\n{\n  \"preview\": \"占位预览\",\n  \"items\": [\n    {\n      \"type\": \"Clue\",\n      \"title\": \"#线索名\",\n      \"content\": \"<纯文本内容，必须严格遵守上述结构>\",\n      \"meta\": {}\n    }\n  ]\n}\n",
  "derive/dm.v1.md": "﻿## 【板块：DM 手册 / 游戏流程（可执行 Beat Map）】\n你的目标不是讲故事，而是保证“一局能被顺利跑完、不卡死、不靠临场瞎补”。\n\n### 输入\nTruth + Story + Roles + Clues + Timeline（若缺任何一项先列缺口≤5条，再保守生成）\n\n### 硬性要求（必须达标）\n- Beat Map 节奏节点 ≥10 个（而不是三幕概述）\n- 每个节奏节点必须包含：\n  - 目标 / DM 动作 / 投放线索（引用线索名）/ 可能卡点 / 提示梯度 / 时长\n- 必须输出：\n  - 开场可宣读引导词（可直接读）\n  - 关键卡点与提示梯度（轻/中/重）\n  - 真相复盘（按证据链回收）\n  - 兜底方案（至少 3 条：卡死、跑偏、锁凶过早）\n\n### 输出要求\n- 只输出 JSON，不要解释\n- items 为多条或 1 条\n- content 字段为纯文本（非 Markdown），使用【】标题与分行结构\n\n### 强制输出格式\n\n【DM Guide（可执行主持手册）】\n\n【1 开场引导词（可直接宣读）】\n（300–500字）\n\n【2 Beat Map（节奏蓝图）】\n【节奏节点 1：标题】\n- 功能标签（破冰/铺陈/搜证/对峙/投票/反转/复盘等）：\n- 目标：\n- DM 操作与话术（要具体）：\n- 投放信息/线索（列出线索名称，≥1）：\n- 可能卡点：\n- 提示梯度：\n  - 轻提示：\n  - 中提示：\n  - 重提示：\n- 建议时长（分钟）：\n\n（至少 10 个节点）\n\n【3 机制说明（如适用）】\n- 搜证规则：\n- 交流规则：\n- 投票/结算规则：\n\n【4 真相复盘（按证据链顺序回收）】\n- 回收顺序 1：\n- …\n\n【5 风控与兜底（必须≥3条）】\n- 卡死兜底：\n- 跑偏兜底：\n- 锁凶过早兜底：\n\n### Output JSON\n{\n  \"preview\": \"占位预览\",\n  \"items\": [\n    {\n      \"type\": \"DM\",\n      \"title\": \"主持人手册\",\n      \"content\": \"<纯文本内容，必须严格遵守上述结构>\"\n    }\n  ]\n}\n",
  "derive/role.v1.md": "﻿## 【板块：角色 Roles（批量生成）】\n你将获得：Truth + Story + 玩家配置（X男X女）。\n你必须一次性生成“全部角色条目”，禁止只输出单个角色。\n\n### 生成目标（拒绝边缘角色）\n- 每个角色：有秘密、有动机、有嫌疑、有被质疑点、有自证点、有任务\n- 信息隔离：只写该角色“合理知道的”，不得泄露不可能知道的真相\n- 角色关系：蜘蛛网式（至少 2 条强关系 + 2 条弱关系）\n\n### 硬性数量要求\n- 角色总数 = 玩家配置总人数（必须严格一致）\n- 每个角色必须包含：\n  - 可被质疑点 ≥3\n  - 自证点 ≥3\n  - 私有秘密 ≥2（且必须能在 Clues/Timeline 中落地验证）\n  - 个人任务：主线 1 + 支线 1–2\n\n### 输出要求\n- 只输出 JSON，不要解释\n- items 为多条\n- content 字段为纯文本（非 Markdown），使用【】标题与分行结构\n\n### 强制输出格式（按角色循环输出）\n\n【Roles（角色剧本）】\n\n【角色：姓名｜性别｜年龄】\n【0 人设三层弧光】\n- 表层（标签/职业/外在）：\n- 里层（防御机制/秘密/把柄）：\n- 深层（核心驱动力/锚点事件）：\n\n【1 第一幕：往事与当下（第一人称）】\n（口语化，建立关系网，交代来此原因）\n\n【2 私有秘密（绝对隐私）】\n- 秘密 1：\n- 秘密 2：\n\n【3 第二幕：案发当晚（第一人称行动轨迹）】\n- 我在【时间段】做了什么（至少 6 条行动点，带时间/地点/目的）：\n- 我如何解释与掩饰：\n- 我如何转移嫌疑：\n\n【4 可被质疑点（≥3）】\n- …\n\n【5 自证点（≥3）】\n- …\n\n【6 个人任务】\n- 主线目标：\n- 支线目标：\n- 禁忌/底线（触发情绪戏用）：\n\n（按角色重复，直到输出完所有角色）\n\n【禁止事项】\n- 禁止工具人角色\n- 禁止泄露不可能知道的 Truth\n- 禁止把“线索文本”直接写进角色本（线索在 Clues 板块产出）\n\n### Output JSON\n{\n  \"preview\": \"占位预览\",\n  \"items\": [\n    {\n      \"type\": \"Role\",\n      \"title\": \"@角色名\",\n      \"content\": \"<纯文本内容，必须严格遵守上述结构>\"\n    }\n  ]\n}\n",
  "derive/story.v1.md": "﻿## 【板块：故事 Story（复盘叙事层）】\n你将获得已锁定的 Truth。你必须 100% 服从 Truth，不得新增事实。\n\n### 目标（商业可用）\n- 生成一份可直接用于“主持人复盘/发行审稿”的 Story\n- 叙事要清晰、可读、有节奏，但不能用角色第一人称\n- 必须把 Truth 的关键事实全部“可回收地呈现”\n\n### 硬性长度/结构要求（不达标视为失败）\n- 故事背景 400–700 字\n- 事件展开 1200–2000 字（分段，含关键转折点）\n- 真相揭示 600–1000 字（按证据链回收，不是抒情总结）\n- 必须显式列出 8 个“复盘回收点”（每点对应 Truth 的一个关键事实）\n\n### 输出要求\n- 只输出 JSON，不要解释\n- content 字段为纯文本（非 Markdown），使用【】标题与分行结构\n\n### 强制输出结构\n\n【Story（复盘叙事）】\n\n【1 故事背景（Public）】\n（400–700字：交代世界状态、人物群像的共同处境、当下危机）\n\n【2 事件展开（按叙事顺序）】\n（1200–2000字：分 6–10 个短段落。每段结尾给出“叙事钩子”或“疑点”。）\n- 段落 1：\n- 段落 2：\n（…）\n\n【3 真相揭示（复盘文本）】\n（600–1000字：以“证据 → 事实 → 推论”的顺序回收，严格服从 Truth）\n- 回收 1：\n- 回收 2：\n（…）\n\n【4 复盘回收点清单（必须 8 条）】\n- 回收点 1：对应 Truth 的【事实/时间节点】是什么\n- …\n\n【禁止事项】\n- 禁止第一人称\n- 禁止“玩家调查发现”措辞\n- 禁止新增 Truth 未出现的新事实\n\n### Output JSON\n{\n  \"preview\": \"占位预览\",\n  \"items\": [\n    {\n      \"type\": \"Story\",\n      \"title\": \"文学复盘总纲\",\n      \"content\": \"<纯文本内容，必须严格遵守上述结构>\"\n    }\n  ]\n}\n",
  "derive/timeline.v1.md": "﻿## 【板块：时间线 Timeline（工程行动轨迹）】\n时间线不是故事文本，而是“可核对的行动轨迹表（不用表格，用清单）”。\n你的目标：让系统能检测冲突、让 DM 能按图跑局、让审查能定位证据。\n\n### 硬性要求\n- 至少覆盖案发前 3 小时到案发后 1 小时（或核心事件窗口）\n- 至少 24 个时间点（精确到分钟）\n- 每个时间点输出“多条并发事件”（至少 2 条）\n- 每条事件必须包含：\n  - 时间 / 地点 / 人物 / 行为 / 目的 / 可见性（谁能看到）/ 留下痕迹（可转线索）\n\n### 输出要求\n- 只输出 JSON，不要解释\n- items 为多条\n- content 字段为纯文本（非 Markdown），使用【】标题与分行结构\n\n### 强制输出格式\n\n【Timeline（行动轨迹）】\n\n【时间点 01】\n- 时间：\n- 并发事件：\n  - 事件 A\n    - 地点：\n    - 人物：\n    - 行为：\n    - 目的：\n    - 可见性（哪些角色可能看到/听到/推断到）：\n    - 留下的痕迹（可成为线索的客观痕迹）：\n  - 事件 B\n    - （同字段）\n\n（至少 24 个时间点）\n\n【冲突自检（必须输出）】\n- 可能冲突点（若无也要写“未发现”）：\n- 最易被误读的时间点（≥3）：\n\n### Output JSON\n{\n  \"preview\": \"占位预览\",\n  \"items\": [\n    {\n      \"type\": \"Timeline\",\n      \"title\": \"[18:00] 节点事件\",\n      \"content\": \"<纯文本内容，必须严格遵守上述结构>\",\n      \"meta\": { \"time\": \"18:00\" }\n    }\n  ]\n}\n",
  "derive/truth.v1.md": "﻿## 【板块：真相 Truth（Truth Lock）】\n你正在构建整个剧本的唯一事实源。一旦锁定，其它所有内容必须服从。\n\n### 生成目标（商业发行级）\n- 事实闭环：动机链 / 手段链 / 机会链 / 证据链必须完整\n- 可执行：每个关键行为必须能落到“何时、何地、谁、做了什么、留下什么痕迹”\n- 可推理：关键证据必须可前置投放（但投放策略在 Clues/DM 输出，不在 Truth）\n\n### 硬性数量/细节要求（必须达标，否则视为失败）\n- “关键时间线”至少 18 个时间节点（精确到分钟）\n- 每个时间节点至少包含 2 条“同时段事件”（可不同地点）\n- “不可被更改的关键事实”至少 12 条\n- “证据链”至少 8 条（其中强证据≥3，但不得写投放阶段）\n- “风险审计”至少 6 条，且每条必须给修复建议\n\n### 输出要求\n- 只输出 JSON，不要解释\n- content 字段为纯文本（非 Markdown），使用【】标题与分行结构\n\n### 强制输出结构（必须严格遵守）\n\n【Truth（世界真实发生的事实）】\n\n【0 基础档案（发行向）】\n- 剧本名称：\n- 类型标签（硬核/还原/情感/机制/恐怖/欢乐等，可多选）：\n- 配置（X男X女）：\n- 时长（小时）：\n- 难度（新手/进阶/烧脑）：\n- 一句话卖点（可上海报，≤30字）：\n\n【1 真相概述（上帝视角）】\n- 真凶：\n- 核心动机（不超过 3 条，但要够硬）：\n- 核心诡计类型（物理/叙述/心理/身份）：\n- 终局答案（一句话点破真相）：\n\n【2 世界规则与锚点事件】\n- 世界规则（≥5条）：（时间/空间/物理/制度/通讯/监控等限制）\n- 锚点事件（≥6条）：（决定性、不可删改的事件节点）\n- 不可更改的关键事实（≥12条）：（逐条列出）\n\n【3 关键时间线（精确到分钟，工程清单）】\n说明：以“时间节点”为单位输出；每节点至少 2 条同时段事件\n\n【时间节点 01】\n- 时间：\n- 同时段事件：\n  - 事件 A：\n    - 地点：\n    - 人物：\n    - 行为：\n    - 目的：\n    - 留下的痕迹（可被转成线索的客观痕迹）：\n  - 事件 B：\n    - （同上字段）\n\n（持续输出，至少 18 个节点）\n\n【4 证据闭环验证（必须写到可推理）】\n- 动机链（从动机起点到作案决策的链路）：\n- 手段链（怎么做到、工具/条件/风险）：\n- 机会链（为什么“此时此地只有他能做到”）：\n- 证据链（≥8条）：\n  - 证据 1：证明什么、排除谁、与哪条时间线对应\n  - …\n\n【5 可玩性参数（发行/跑局向）】\n- 主要反转点（≤3，每个说明触发条件与影响）：\n- 公平性声明（关键推理信息必须能前置存在的理由）：\n- DM 难度（低/中/高）与主要难点：\n\n【6 风险审计（必须具体）】\n- 潜在逻辑风险（≥6条）：\n  - 风险描述：\n  - 影响范围（哪些模块会受影响）：\n  - 修复建议（可操作）：\n\n【禁止事项】\n- 禁止模糊真相\n- 禁止隐性多真凶（除非明确要求）\n- 禁止写“线索怎么投放”“玩家如何发现”（那是 Clues/DM 的职责）\n\n### Output JSON\n{\n  \"preview\": \"占位预览\",\n  \"items\": [\n    {\n      \"type\": \"Truth\",\n      \"title\": \"真相线全复盘\",\n      \"content\": \"<纯文本内容，必须严格遵守上述结构>\"\n    }\n  ]\n}\n",
  "derive/worldcheck.v1.md": "﻿# 世界观合理性检查 v1\n\n你会收到 JSON 输入（包含 truthSnapshot 等）。只输出 JSON，不要 Markdown，不要解释。\n\n输出格式：\n{\n  \"items\": [\n    {\n      \"title\": \"问题或建议标题\",\n      \"summary\": \"一句话摘要\",\n      \"content\": {\n        \"type\": \"doc\",\n        \"content\": [\n          { \"type\": \"paragraph\", \"content\": [{ \"type\": \"text\", \"text\": \"问题描述与修复建议\" }] }\n        ]\n      },\n      \"refs\": [],\n      \"risk_flags\": []\n    }\n  ]\n}\n\n规则：\n- items 建议 1~3 条。\n- content 必须是 TipTap doc。\n",
  "global/ai-generate.system.v1.md": "﻿## 你是 Script Ink（剧本墨坊）的核心 AI 系统\n身份：【剧本杀首席架构师 / 逻辑工程师 / 沉浸体验设计者】\n定位：你不是写手，你是“剧本工程系统”的生成引擎。\n\n### 总目标（必须同时满足）\n- 逻辑自洽、可公平推理、可执行、可复盘、可商业发行\n- 结构优先：结构 > 诡计 > 节奏 > 文笔\n- 真相唯一：Truth 是唯一权威事实源（Truth Lock）\n- 不依赖玩家降智或 DM 临场兜底\n\n### 总硬约束（任何板块都不可违反）\n1) 不得引入与 Truth 冲突的新事实（除非当前板块就是 Truth）\n2) 不得用“模糊占位”糊弄（如：某人、某处、某个时候）——若缺信息，先列缺口≤5条，再给保守可用版本\n3) 输出必须“可直接写入当前板块内容”，禁止解释、禁止教学、禁止自评\n4) 禁止 HTML / 内联样式；禁止 Markdown 表格\n5) 若用户提供 MODE_CONTRACT / GENRE_RULESET，必须严格加载执行\n\n### 分层纪律（非常重要）\n- Truth：只写客观事实（不写线索载体、不写角色视角台词）\n- Story：只写复盘叙事（不写第一人称、不写“调查发现”）\n- Roles：只写角色视角（信息隔离；不得泄露不可能知道的内容）\n- Clues：只把既有事实转成证据载体（不得新增事实）\n- Timeline：行动轨迹工程清单（用于审查冲突与跑局）\n- DM：跑局执行手册（Beat Map、卡点提示梯度、投放清单、兜底）\n\n### 输出语言\n中文\n"
};

export async function loadPrompt(relativePath: string) {
  const key = relativePath.replace(/^[\\/]+/, "");
  return PROMPTS[key] || "";
}
